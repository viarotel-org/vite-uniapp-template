# Vite Uniapp Template

[![Gitee](https://gitee.com/viarotel-org/vite-uniapp-template/badge/star.svg?theme=dark)](https://gitee.com/viarotel-org/vite-uniapp-template)
[![GitHub](https://img.shields.io/github/stars/viarotel-org/vite-uniapp-template?label=Github%20Stars)](https://github.com/viarotel-org/vite-uniapp-template)
[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/viarotel-org/vite-uniapp-template)

ğŸš€ **ä»¥å®ç”¨ä¸ºå…ˆçš„ uni-app èµ·æ‰‹æ¨¡æ¿ã€‚** [æŸ¥çœ‹æ¼”ç¤º](https://vite-uniapp-template.netlify.app/)

è¯¥æ¨¡æ¿ä¸ºæ‚¨çš„ uniapp é¡¹ç›®æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„èµ·ç‚¹ï¼Œé›†æˆäº†ç°ä»£åŒ–å·¥å…·å’Œç²¾å¿ƒè®¾è®¡çš„çº¦å®šï¼Œä»¥ç®€åŒ–å¼€å‘æµç¨‹ã€‚

## æ ¸å¿ƒç‰¹æ€§

- ğŸ’ª ä¼˜åŒ–çš„èµ„æºç®¡ç†: æ— ç¼åˆ‡æ¢æœ¬åœ°ä¸è¿œç¨‹é™æ€èµ„æºã€‚è¿™å¯¹äºå…‹æœå°ç¨‹åºåŒ…å¤§å°é™åˆ¶è‡³å…³é‡è¦ã€‚
- ğŸ“¦ æ™ºèƒ½åˆ†åŒ…: æ¸…æ™°ç›´è§‚çš„ pages ç›®å½•ç»“æ„ï¼Œç»“åˆä¾¿æ·çš„é…ç½®ï¼Œè½»æ¾å®ç°åŸºäºåŠŸèƒ½çš„åˆ†åŒ…ã€‚
- ğŸ›£ ç±» VueRouter è·¯ç”±: ä½¿ç”¨ [uniapp-router-next](https://www.npmjs.com/package/uniapp-router-next) å¹¶è¿›è¡Œäº†å¢å¼ºï¼Œå¦‚æ‹¦æˆªå™¨ã€ä¸­é—´ä»¶å’Œè·¯ç”±åˆ«åï¼Œæä¾›ç†Ÿæ‚‰çš„ API ä½“éªŒã€‚
- ğŸ“Š Pinia çŠ¶æ€ç®¡ç†: å€ŸåŠ© [Pinia](https://pinia.vuejs.org/) å®ç°å¼ºå¤§ä¸”ç›´è§‚çš„åº”ç”¨çŠ¶æ€ç®¡ç†ã€‚
- âš¡ï¸ ç°ä»£åŒ–è¯·æ±‚å·¥ä½œæµ: é‡‡ç”¨ [Alova](https://alova.js.org/)ï¼Œä¸€ä¸ªä¸‹ä¸€ä»£è¯·æ±‚åº“ï¼Œç®€åŒ–æ•°æ®è·å–æµç¨‹ã€‚
- ğŸ‘‡ å†…ç½® Z-Paging: é›†æˆäº†é«˜æ€§èƒ½ã€æ˜“ç”¨çš„ä¸‹æ‹‰åˆ†é¡µç»„ä»¶ï¼Œè½»æ¾å®ç°ä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½æ›´å¤šç­‰åŠŸèƒ½ã€‚
- ğŸ’… Unocss åŸå­åŒ– CSS: ä½¿ç”¨åŸå­åŒ– CSS ç±»åä¹¦å†™è§„èŒƒï¼Œå³ä½¿åœ¨å°ç¨‹åºç¯å¢ƒä¸‹ä¹Ÿå®Œç¾æ”¯æŒã€‚
- ğŸ¨ è½»é‡çº§ UI ä¸ä¸»é¢˜åŒ–: é›†æˆ [wot-design-uni](https://netlify.wot-design-uni.cn/)ï¼Œæä¾›æ›´è½»é‡çš„ UIï¼Œæ»¡è¶³ç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ï¼Œå¹¶æ”¯æŒä¸»é¢˜å®šåˆ¶ã€‚
- ğŸ“ ä¸“æ³¨ JavaScript: ä½¿ç”¨ JavaScript æ„å»ºï¼Œåœ¨å¸¸è§„ä¸šåŠ¡åœºæ™¯æˆ–å›¢é˜ŸæŠ€èƒ½æ°´å¹³å·®å¼‚è¾ƒå¤§æ—¶ï¼Œç¡®ä¿æ›´å¹³æ»‘çš„å¼€å‘ä½“éªŒã€‚

## å¿«é€Ÿä¸Šæ‰‹

### 1. å…‹éš†é¡¹ç›®

```shell
git clone https://github.com/viarotel-org/vite-uniapp-template.git
cd vite-uniapp-template
```

### 2. å®‰è£…ä¾èµ–

> è¯·ä½¿ç”¨ node@20.0 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚

æ¨èä½¿ç”¨ `pnpm` å®‰è£…ä¾èµ–ã€‚å½“å‰æœªåœ¨ `npm` æˆ– `yarn` ç¯å¢ƒä¸‹è¿›è¡Œå……åˆ†æµ‹è¯•ï¼Œå¯èƒ½å­˜åœ¨ä¾èµ–ä¸å…¼å®¹æˆ–ç‰ˆæœ¬å¯¹é½é—®é¢˜ã€‚

```shell
pnpm install
```

### 3. è¿è¡Œé¡¹ç›®

#### ä½¿ç”¨ä»£ç ç¼–è¾‘å™¨ (ä¾‹å¦‚ VS Code)

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
# H5 å¹³å°
pnpm dev:h5

# å¾®ä¿¡å°ç¨‹åº
pnpm dev:mp-weixin

# Android App
pnpm dev:app-android

# æ›´å¤šå¹³å°è¯·å‚é˜… package.json ä¸­çš„ `scripts` éƒ¨åˆ†ã€‚
```

#### ä½¿ç”¨ HBuilderX

- å°†é¡¹ç›®æ–‡ä»¶å¤¹æ‹–æ‹½åˆ° HBuilderX ä¸­ã€‚
- ç¡®ä¿å·²å®‰è£…ä¾èµ– (å¦‚æœå°šæœªå®‰è£…ï¼Œè¯·åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ `pnpm install`)ã€‚
- ç‚¹å‡»é¡¹ç›® `/src` ç›®å½•ä¸‹çš„ä»»æ„æ–‡ä»¶ã€‚
- åœ¨ HBuilderX èœå•ä¸­ï¼Œå¯¼èˆªè‡³â€œè¿è¡Œâ€å¹¶é€‰æ‹©æ‚¨çš„ç›®æ ‡è¿è¡Œç¯å¢ƒã€‚

## åŠŸèƒ½ç¤ºä¾‹

### åˆ›æ–°çš„åˆ†åŒ…ç»“æ„

ä¼ ç»Ÿåˆ†åŒ…ç»“æ„ï¼š

```
src/
â”œâ”€â”€ pages/           # ä¸»åŒ…é¡µé¢
â”‚   â””â”€â”€ index.vue
â”œâ”€â”€ pages-user/      # ç”¨æˆ·ç›¸å…³åˆ†åŒ…
â”‚   â”œâ”€â”€ profile.vue
â”‚   â””â”€â”€ settings.vue
â””â”€â”€ pages-shop/      # å•†åŸç›¸å…³åˆ†åŒ…
    â”œâ”€â”€ list.vue
    â””â”€â”€ detail.vue
```

vite-uniapp-template çš„åˆ†åŒ…ç»“æ„ï¼š

```
src/
â””â”€â”€ pages/
    â”œâ”€â”€ index/           # ä¸»åŒ…é¡µé¢ï¼ˆå¿…éœ€ï¼‰
    â”‚   â”œâ”€â”€ index.vue    # é¦–é¡µï¼ˆå¿…éœ€ï¼‰
    â”‚   â”œâ”€â”€ category.vue # Tabé¡µé¢
    â”‚   â””â”€â”€ mine.vue     # Tabé¡µé¢
    â”œâ”€â”€ user/            # ç”¨æˆ·åˆ†åŒ…
    â”‚   â”œâ”€â”€ login.vue
    â”‚   â””â”€â”€ profile.vue
    â””â”€â”€ shop/            # å•†åŸåˆ†åŒ…
        â”œâ”€â”€ list.vue
        â””â”€â”€ detail.vue
```

åˆ†åŒ…é…ç½®ç¤ºä¾‹ï¼š

```javascript
// pages.config.js
export default {
  // ä¸»åŒ…é…ç½®
  pages: [
    {
      path: 'pages/index/index',
      style: {
        navigationBarTitleText: 'é¦–é¡µ'
      }
    },
    {
      path: 'pages/index/category',
      style: {
        navigationBarTitleText: 'åˆ†ç±»'
      }
    }
  ],

  // åˆ†åŒ…é…ç½®
  subPackages: [
    {
      root: 'pages/user',
      pages: [
        {
          path: 'login',
          style: { navigationBarTitleText: 'ç™»å½•' }
        }
      ]
    }
  ]
}
```

### é™æ€èµ„æºå¤„ç†

```bash
# æœ¬åœ°å¼€å‘æ¨¡å¼ (.env.development)
VITE_ASSETS_MODE=local

# ç”Ÿäº§ç¯å¢ƒ (.env.production)
VITE_ASSETS_MODE=remote
VITE_ASSETS_CDN=https://your-cdn.com/assets
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```html
<image src="~@assets/images/logo.png" />
<!-- å¼€å‘ç¯å¢ƒ: /src/assets/images/logo.png -->
<!-- ç”Ÿäº§ç¯å¢ƒ: https://your-cdn.com/assets/images/logo.png -->
```

æ›´å¤šé…ç½®è¯·å‚è€ƒ `vite.config.plugins.js` ä¸­çš„ `useAssetPathResolver` æ’ä»¶

### å…¨å±€ä¸»é¢˜å®šåˆ¶

ç”± `unocss-preset-shades` æä¾›æ”¯æŒã€‚è½»æ¾åº”ç”¨æ‚¨çš„ä¸»é¢˜é¢œè‰²ï¼š

```html
<div class="text-primary-500"></div>

<div class="bg-primary-500"></div>

<!-- ä»…åœ¨å°ç¨‹åºä¸­ç”Ÿæ•ˆï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒ [unocss-preset-uni](https://github.com/uni-helper/unocss-preset-uni)  -->
<div class="uni-mp:border uni-mp:border-primary-500"></div>
```

### é¡µé¢å¯¼èˆª

ä¸ Vue Router ç±»ä¼¼ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼è¿›è¡Œå¯¼èˆªï¼š

#### åœ¨æ¨¡æ¿ä¸­ï¼š

```javascript
// è·³è½¬åˆ°ç™»å½•é¡µå¹¶æºå¸¦æŸ¥è¯¢å‚æ•°
this.$Router.push({
  path: '/login',
  query: {
    id: 'someId',
  },
})

// è·å–è·¯ç”±å‚æ•°
const userId = this.$Route.query.id

// æ›¿æ¢å½“å‰é¡µé¢
this.$Router.replace('/dashboard')

// å…³é—­æ‰€æœ‰é¡µé¢å¹¶è·³è½¬
this.$Router.replaceAll('/home')
```

#### åœ¨è„šæœ¬ä¸­ (æ”¯æŒè‡ªåŠ¨å¯¼å…¥)ï¼š

```javascript
// å·²é¢„ç½®è‡ªåŠ¨å¯¼å…¥è¯¥éƒ¨åˆ†å¯çœç•¥
// import { useRoute, useRouter } from '$uni-router'

const router = useRouter()
const route = useRoute()

router.push('/settings')
console.log(route.query)
```

#### è·¯ç”±åˆ«å (`pages.config.js`)ï¼š

```javascript
const aliasConfig = {
  path: 'pages/login/index', // å®é™…è·¯å¾„
  aliasPath: '/login', // åˆ«å
}
```

### è·¯ç”±å®ˆå«

å®ç°å¯¼èˆªå®ˆå«ä»¥å¤„ç†æƒé™éªŒè¯ç­‰é€»è¾‘ï¼š

```javascript
// ç¤ºä¾‹: src/permission/login/index.js
router.beforeEach((to, from, next) => {
  // åœ¨æ­¤ç¼–å†™ä½ çš„é€»è¾‘ (ä¾‹å¦‚ï¼šæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²è®¤è¯)
  // if (to.path === '/profile' && !isAuthenticated) {
  //   next('/login');
  // } else {
  //   next();
  // }
  next() // é»˜è®¤ç»§ç»­å¯¼èˆª
})

router.afterEach((to, from) => {
  // å¯¼èˆªåé€»è¾‘
})
```

> å…·ä½“å®ç°è¯·å‚é˜… `src/permission` ç›®å½•ã€‚

### è·¯ç”±ä¸­é—´ä»¶

å¯¹ç‰¹å®šè·¯ç”±åº”ç”¨ä¸­é—´ä»¶ä»¥å®ç°ç²¾ç»†åŒ–æ§åˆ¶ã€‚

#### ä½¿ç”¨ä¸­é—´ä»¶ (`pages.config.js`)ï¼š

```javascript
// å¯¹ç”¨æˆ·é¡µé¢åº”ç”¨ 'test' ä¸­é—´ä»¶
const pageConfig = {
  path: '/pages/user/index',
  aliasPath: '/user',
  meta: {
    middleware: ['test'],
  },
}
```

#### å®šä¹‰ä¸­é—´ä»¶ï¼š

ä¸­é—´ä»¶ä»£ç ç»“æ„ä¸è·¯ç”±å®ˆå«åŸºæœ¬ä¸€è‡´ï¼Œä½†ä»…æ‹¦æˆªåœ¨å…¶å£°æ˜çš„è·¯ç”±ä¸­é…ç½®çš„ä¸­é—´ä»¶ã€‚

```javascript
// ç¤ºä¾‹: src/permission/test/index.js
import { defineMiddleware } from '$uni-router'
import testMiddlewareLogic from './test/index.js'

export default (app, router) => {
  defineMiddleware('test', testMiddlewareLogic, { router, app })
}
```

## å¸¸è§é—®é¢˜

- **ä¾èµ–å®‰è£…/å¯åŠ¨å¤±è´¥**:
  å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå°è¯•åˆ é™¤ `pnpm-lock.yaml`ã€`yarn.lock` æˆ– `package-lock.json` æ–‡ä»¶ï¼Œç„¶åé‡æ–°è¿è¡Œå®‰è£…å‘½ä»¤ (ä¾‹å¦‚ `pnpm install`)ã€‚
- **è·¯ç”±å®ˆå«é™·å…¥å¾ªç¯**:
  è·¯ç”±å®ˆå«ä¸­é¡µé¢è·³è½¬ä¸æ”¯æŒè·¯å¾„åˆ«åï¼Œè¯·ä½¿ç”¨å®é™…è·¯å¾„ï¼Œé¿å…ä½¿ç”¨åˆ«å(aliasPath)ã€‚

## è·å–æ”¯æŒ

è¿™æ˜¯ä¸€ä¸ªä¾é çƒ­çˆ±é©±åŠ¨çš„å¼€æºé¡¹ç›®ï¼Œå› æ­¤æ”¯æŒä¼šæ ¹æ®æ—¶é—´æƒ…å†µæä¾›ï¼Œæ›´æ–°èŠ‚å¥å¯èƒ½ä¸å›ºå®šã€‚

- **é¡¹ç›®é—®é¢˜ä¸åé¦ˆ**: [åœ¨ GitHub ä¸Šæäº¤ Issue](https://github.com/viarotel-org/vite-uniapp-template/issues)
- **è”ç³»æ–¹å¼**: viarotel@qq.com

## æ”¯æŒæœ¬é¡¹ç›®

å¦‚æœè¯¥é¡¹ç›®å¸®åˆ°ä½ çš„è¯ï¼Œå¯ä»¥è¯·æˆ‘å–æ¯å’–å•¡ï¼Œè®©æˆ‘æ›´æœ‰ç²¾ç¥å®Œå–„è¯¥é¡¹ç›® ğŸ˜›

<div style="display:flex;">
  <img src="https://cdn.jsdelivr.net/gh/viarotel-org/escrcpy@main/src/assets/sponsor/viarotel-wepay.png" alt="viarotel-wepay" width="30%">
  <img src="https://cdn.jsdelivr.net/gh/viarotel-org/escrcpy@main/src/assets/sponsor/viarotel-alipay.png" alt="viarotel-alipay" width="30%">
  <img src="https://cdn.jsdelivr.net/gh/viarotel-org/escrcpy@main/src/assets/sponsor/viarotel-paypal.png" alt="viarotel-paypal" width="30%">
</div>
